<!doctype html>
{% load static %}
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'css/styles3.css'%}">
    <title>Topic</title>
  </head>
  <body>
		<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Please share your experiences</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
				<div class="mb-3">
					<label for="exampleFormControlInput1" class="form-label">Email address</label>
					<input type="email" class="form-control" id="exampleFormControlInput1" placeholder="name@example.com">
				</div>
				<div class="mb-3">
					<label for="exampleFormControlTextarea1" class="form-label">Example textarea</label>
					<textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
				</div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary">Add</button>
      </div>
    </div>
  </div>
</div>
        <div class="background-image">
          <img src="{% static bg %}" alt="">


        </div>
				<div class="flex">


        <div style="z-index: 1; background-color:rgba(255, 255, 255, 0.6); padding: 30px; border-radius: 15px; text-align: center; width: 1050px; font-size: 23px; font-weight: bold;">

        	<h1>Lorem Ipsum</h1>

        	<p>
        	ფსიქოლოგიური ძალადობა წარმოადგენს ნებისმიერ განზრახ ქცევას,
რომელიც სერიოზულად აფერხებს სხვის ფსიქოლოგიურ მთლიანობას
იძულების ან მუქარის საშუალებით. ძალადობის ყველა ფორმას
ფსიქოლოგიური ასპექტი აქვს, ვინაიდან ძალადობრივი ან შეურაცხმყოფელის
მთავარი მიზანი სხვა ადამიანის მთლიანობისა და ღირსების
შელახვაა.საზოგადოებაში ასეთი ძალადობის ერთ – ერთი გავრცელებული
მაგალითია ახალგაზრდა ქალების ან მამაკაცების იზოლაცია, რომლებიც არ
მოქმედებენ ტრადიციული გენდერული როლების შესაბამისად.
ფსიქოლოგიური ძალადობა: შეურაცხყოფა, შანტაჟი, დამცირება, მუქარა ან სხვა
ისეთი მოქმედება, რომელიც ადამიანის პატივისა და ღირსების შელახვას
იწვევს;

ფსიქოლოგიური ძალადობის 30 ნიშანი:
ბერი დევანპორტის კლასიფიკაცია

1. ისინი შეურაცხყოფას გაყენებენ, ხშირად ხალხში.
2. ისინი რეგულარულად თქვენს აზრს, იდეას, წინადადებას ან
მოთხოვნილებას უგულვებელყოფენ.
3. ისინი იყენებენ სარკაზმს ან გამოჯავრებას, რომ დაგამცირონ ან საკუთარ
თავზე ცუდად ფიქრი გაიძულონ.
4. ისინი გადანაშაულებენ, რომ თქვენ „ძალიან მგრძნობიარე“ ხართ, რომ
შეურაცხმყოფელი შენიშვნიდან ყურადღება სხვა რამეზე გადაგატანინონ.
5. ცდილობენ გაგაკონტროლონ და როგორც ბავშვს, ისე გექცევიან.

        	</p>

        <a id='relation_count' type="button">{{topic.relation_count}} Can Relate</a>

        </div>

					<button type="button" name="button" class="add-exp" data-bs-toggle="modal" data-bs-target="#exampleModal">add your experience!</button>
					</div>

				<!-- Scripts -->
					<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
					<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
					<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
					<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
					<script src="{% static 'css/js/scripts.js' %}"></script>

					<script >
						$(document).ready(function () {

							const cookies = document.cookie
    					.split(';')
    					.map(cookie => cookie.split('='))
    					.reduce((accumulator, [key, value]) => ({ ...accumulator, [key.trim()]: decodeURIComponent(value) }), {});


    					function check_related(){
    						$.ajax({
                        data: {
                            'csrfmiddlewaretoken' : "{{ csrf_token }}",
                        }, // get the form data
                        url: "{% url 'check_relate' topic.pk %}",
                        type: 'POST',

                        success: function(response) {
                            if (response.result === true) {
                                console.log('Related')
                                document.getElementById('relation_count').innerText = "{{topic.relation_count}} I Can't Relate"

                            }else if (response.result == false) {
                                console.log('UnRelated')
                                document.getElementById('relation_count').innerText = "{{topic.relation_count}} I Can Relate"
                            }
                            else if (response.result == 'Empty'){
                            	console.log('Empty')
                            }

                        },
                        // on error
                        error: function(response) {
                            // alert the error if any error occured
                            console.log(response.responseJSON)
                        }
                    });
                return false;
    					}

    					check_related()

            // catch the form's submit event
            $('#relation_count').on('click', function () {
                // create an AJAX call
                $.ajax({
                        data: {
                            'csrfmiddlewaretoken' : "{{ csrf_token }}",
                        }, // get the form data
                        url: "{% url 'relate' topic.pk %}",
                        type: 'POST',

                        success: function(response) {
                            if (response.result === true) {
                                console.log('Related')
                                console.log(response.count)

                                document.getElementById('relation_count').innerText = response.count + " I Can't Relate"

                            }else if (response.result == false) {
                                console.log('UnRelated')
                                document.getElementById('relation_count').innerText = response.count + "I Can Relate"
                            }


                        },
                        // on error
                        error: function(response) {
                            // alert the error if any error occured
                            console.log(response.responseJSON)
                        }
                    });
                return false;
            });
        });
					</script>

			</body>
		</html>
